{
  "controls": [
    {
      "name": "search",
      "options": {
        "url": "http://localhost:3001/origoserver/singlesearch",
        "searchAttribute": "NAMN",
        "geometryAttribute": "GEOM",
        "layerNameAttribute": "TYPE",
        //"idAttribute": "GID",
        "title": "Adress",
        "hintText": "Sök adress eller platser...",
        "autocompletePlacement": "left", //can be search, left or floating (defaults to search),
        "searchlistOptions": {
          "placement": "left", //can be search, left or floating, activated by hitting enter (defaults to nothing)
          "export": true,
          "exportUrl": "origo-server-url/excelcreator",
          "exportButtontext": "Exportera lista",
          "exportFilename": "export.xlsx",
          "makeSelectionButton": true, //default is false
          "makeSelectionButtonText": "Använd som urval"
        }
      }
      
    },
    {
      "name": "home",
      "options": {
        "zoomOnStart": true
      }
    },
    {
      "name": "mapmenu",
      "options": {
        "isActive": false
      }
    },
    {
      "name": "sharemap"
    },
    {
      "name": "geoposition"
    },
    {
      "name": "print"
    },
    {
      "name": "about",
      "options": {
        "buttonText": "Om Origo",
        "title": "Om Origo",
        "content": "<p>Origo är ett ramverk för webbkartor. Ramverket bygger på JavaScript-biblioteket OpenLayers. Du kan använda Origo för att skapa egna webbaserade kartapplikationer.</p><br><p>Projektet drivs och underhålls av ett antal svenska kommuner. Besök gärna <a href='https://github.com/origo-map/origo' target='_blank'>Origo på GitHub</a> för mer information.</p>"
      }
    },
    {
      "name": "link",
      "options": {
        "title": "Origo",
        "url": "https://github.com/origo-map/origo"
      }
    },
    {
      "name": "legend",
      "options": {
        "labelOpacitySlider": "Opacity",
        "useGroupIndication": true
      }
    },
    {
      "name": "position",
      "options": {
        "title": "Web Mercator",
        "projections": {
          "EPSG:4326": "WGS84",
          "EPSG:3006": "Sweref99 TM"
        }
      }
    },
    {
      "name": "measure"
    },
    {
      "name": "editor",
      "options": {
        "isActive": false,
        "autoSave": true,
        "defaultLayer": "multipolygonlager"

      }
    }
  ],
  "pageSettings": {
    "footer": {
      "img": "img/png/logo.png",
      "url": "https://github.com/origo-map/origo",
      "text": "Origo"
    },
    "mapGrid": {
      "visible": true
    }
  },
  "projectionCode": "EPSG:3857",
  //"projectionCode": "EPSG:3006",
  "projectionExtent": [
    -20026376.39,
    -20048966.10,
    20026376.39,
    20048966.10
  ],
  "proj4Defs": [
    {
      "code": "EPSG:3006",
      "projection": "+proj=utm +zone=33 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs"
    }
  ],
  "extent": [
    -20026376.39,
    -20048966.10,
    20026376.39,
    20048966.10
  ],
  "center": [
    1810000,
    8390000
  ],
  "zoom": 5.7,
  "resolutions": [
    156543.03,
    78271.52,
    39135.76,
    19567.88,
    9783.94,
    4891.97,
    2445.98,
    1222.99,
    611.50,
    305.75,
    152.87,
    76.437,
    38.219,
    19.109,
    9.5546,
    4.7773,
    2.3887,
    1.1943,
    0.5972
  ],
  "featureinfoOptions": {
    "changePointerOnHover": true,
    "infowindow": "infowindow",
    //"infowindow": "sidebar",
    "infowindowOptions": {
      "export": {
        "clientExport": {
          "format": "geojson",
          "button": {
            "roundButton": false
          }
        }
      },
      "listLayout": false,
      "groupAggregations": [
        {
          "layer": "linjelager", // Optional. Name of layer to apply to. If omitted or empty applies to all layers
          "function": "sum", // Required. Aggregation function. Only "sum" is supported
          //"scalefactor": 0.01, // Optional. Factor to multiply result with. Defaults to 1
          "decimals": 2, // Optional. Number of decimals in result. Defaults to 2
          // Required. Name of attribute to aggregate. If it starts with @ it is a function that is applied to each feature.
          // Supported functions are @area and @length. 
          // If no features in a layer has the attribute or the function can not be applied to the feature type (e.g. using @area on line features)
          // the aggregation is ignored for that layer
          "attribute": "@length",
          "label": "Total length" //, // Optional. Text to put before aggregation result. Defaults to function(attribute)
          //"unit": "dekametrar" // Optional. Text to put after aggregation result. Default to empty
        },
        {
          "layer": "", // Id or name? If empty apply to all
          "function": "sum",
          "attribute": "@area",
          //"useHectare":  false,
          "label": "Total yta ", //prefix? default to function name?
          "suffix": " kvadrat" //suffix, default to empty
        },
        {
          "layer": "", // Id or name? If empty apply to all
          "function": "sum",
          "attribute": "inten",
          "decimals": 9,
          //"scalefactor": 100,
          "unit": "grejs"
          //"label": "Total yta", //prefix? default to function name?
          //"suffix": "kvadrat" //suffix, default to empty
        }
      ]
    }
  },
  "source": {
    "local": {
      "url": "http://localhost:8008/geoserver/wms"
    },
    "local_wfs": {
      "url": "http://localhost:8008/geoserver/wfs",
      "workspace": "http://localhost:8008/sf",
      "prefix": "sf"
    }

  },
  "groups": [
    {
      "name": "background",
      "title": "Bakgrundskartor",
      "expanded": true
    },
    {
      "name": "lager",
      "title": "Da group",
      "groups": [
        {
          "name": "krash",
          "title": "Krasch boom bang"
        }
      ]
    }
  ],
  "layers": [
    {
      // "classNa": "a",
      "name": "WMSigt",
      "id": "sf:multipolygonlager",
      "title": "Multipoly",
      "group": "krash",
      "source": "local",
      "type": "WMS",
      "sourceParams": {
        "CQL_FILTER": "fritext LIKE '%Vätter%'"
      },
      "attributes": [
        {
          "name": "fritext"
        },
        {
          "html": "Areal: {{@area(2)}}"
        }
      ],
      //"geometryName": "the_geom",
      //"geometryType": "MultiPolygon",
      "visible": false
      //"drawTools": [ "Polygon", "box" ]
    },
    {
      // "classNa": "b",
      "name": "sf:multipolygonlager",
      "title": "MultipolyWFS",
      "group": "krash",
      "source": "local_wfs",
      "type": "WFS",
      "editable": true,
      "attributes": [
        {
          "name": "fritext",
          "type": "text"
        },
        //{
        //  "html": "Center: {{@center}}"
        //},
        {
          "name": "state",
          "type": "text"
        }
        //,
        //{
        //  "title": "Planlänkar",
        //  "linktext": "planTexts",
        //  "url": "planLinks",
        //  "splitter": ";"
        //}

      ],
      "geometryName": "the_geom",
      "geometryType": "MultiPolygon",
      "visible": false,
      "drawTools": [ "Polygon", "box" ] 
      //,
      //"attachments": {
      //  "formTitle": "Attachments",
      //  //"layerId": "whatever",
      //  "url": "http://localhost:3001/ngp/attachments/",
      //  "foreignKey": "fritext",
      //  "groups": [
      //    {
      //      "name": "proto",
      //      "title": "Protocols",
      //      "allowedFiles": ".pdf"
      //    },
      //    {
      //      "name": "planer",
      //      "title": "Planfiler",
      //      "allowedFiles": ".jpg,.png",
      //      "linkAttribute": "planLinks",
      //      "fileNameAttribute": "planTexts"

      //    }
      //  ]
      //}
      //"relatedLayers": [
      //  {
      //    "layerName": "entitet_blob",
      //    "FK": "parent_fid",
      //    "featureTitle": "name"
      //    //"promoteAttribs": [
      //    //  {
      //    //    "parentName": "responsible",
      //    //    "html": "<p><b>{{name}},</b>{{org}}</p>"
      //    //  }
      //    //]
      //  }
      //]
    },
    {
      "name": "sf:entitet_blob",
      "title": "blobban",
      "group": "root",
      "source": "local_wfs",
      "type": "WFS",
      //"editable": true,
      "isTable": true,
      "strategy": "bbox",
      "attributes": [
        {
          "name": "name",
          "type": "text"
        },
        {
          "name": "imgsrc",
          "type": "image",
          "maxSize": 50
        }
      ]
      //"geometryName": "the_geom",
      //"geometryType": "MultiPolygon",
      //"visible": true,
      //"drawTools": [ "Polygon", "box" ]
    },
    {
      "name": "sf:linjelager",
      "title": "Linjärt min käre Watson",
      "group": "root",
      "source": "local_wfs",
      "type": "WFS",
      "editable": true,
      "attributes": [
        {
          "name": "fritext",
          "type": "text"
        },
        {
          "name": "inten",
          "title": "Inten ",
          "type": "searchList",
          "config": {
            "url": "http://localhost:3000/domain/linjer",
            "valueQueryParameter": "value",
            //"dynamic": true,
            "useBackingValue": true,
            "minChars": 1
          }
        },
        {
          "html": "Längd: {{@length}}"
        },
        {
          "html": "Center: {{@center}}"
        }
      ],
      "geometryName": "the_geom",
      "geometryType": "LineString"
      //"visible": true
      //"allowedEditOperations": [ "create" ],
      //"drawTools": [
      //  "Line",
      //  {"toolName": "Copy"}
      //]
    },
    {
      "name": "origo-cities",
      "title": "Origokommuner",
      "group": "root",
      "source": "data/origo-cities-3857.geojson",
      "style": "origo-logo",
      "type": "GEOJSON",
      "attributes": [
        {
          "name": "name"
        }
      ],
      "visible": true
    },
    {
      "name": "origo-mask",
      "opacity": 0.25,
      "title": "origo-mask",
      "group": "none",
      "queryable": false,
      "source": "data/origo-mask-3857.geojson",
      "style": "mask",
      "type": "GEOJSON",
      "visible": true
    },
    {
      "name": "osm",
      "title": "OpenStreetMap",
      "group": "background",
      "queryable": false,
      "style": "karta_osm",
      "type": "OSM",
      "visible": true
    }
  ],
  "styles": {
    "mask": [
      [
        {
          "stroke": {
            "color": "rgba(0,0,0,1.0)"
          },
          "fill": {
            "color": "rgba(0,0,0,1.0)"
          }
        }
      ]
    ],
    "origo-logo": [
      [
        {
          "label": "Origokommuner",
          "circle": {
            "radius": 10,
            "stroke": {
              "color": "rgba(0,0,0,1)",
              "width": 2.5
            },
            "fill": {
              "color": "rgba(255,255,255,0.9)"
            }
          }
        },
        {
          "circle": {
            "radius": 2.5,
            "stroke": {
              "color": "rgba(0,0,0,0)",
              "width": 1
            },
            "fill": {
              "color": "rgba(37,129,196,1)"
            }
          }
        }
      ]
    ],
    "cirkel": [
      [
        {
          "circle": {
            "radius": 6,
            "stroke": {
              "color": "rgba(0,0,0,1)",
              "width": 2
            },
            "fill": {
              "color": "rgba(0,0,0,0.5)"
            }
          }
        }
      ]
    ],
    "karta_osm": [
      [
        {
          "image": {
            "src": "img/png/osm.png"
          }
        }
      ]
    ],
    "karta_gra": [
      [
        {
          "image": {
            "src": "img/png/gra.png"
          }
        }
      ]
    ],
    "karta_farg": [
      [
        {
          "image": {
            "src": "img/png/farg.png"
          }
        }
      ]
    ],
    "orto": [
      [
        {
          "image": {
            "src": "img/png/orto.png"
          }
        }
      ]
    ]
  }
}
